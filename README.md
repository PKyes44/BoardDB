# 1. 프로그램 설명
이 프로그램은 네이버카페, 다음카페 등 커뮤니티 사이트에서 자주 쓰이는 게시판의 기능들을 사용할 수 있도록 만들었습니다. 이 프로그램은 DB설계와 DB프로그래밍의 과정을 거쳐 완성되었습니다.이 프로그램의 기능은 로그인 후 해당 아이디로 게시물 보기, 게시물 작성, 게시물에 댓글 작성, 게시물/댓글 수정과 삭제를 할 수 있습니다. 게시물 및 댓글 수정과 삭제는 작성자 또는 관리자 아이디가 아니면 할 수 없으며 그 외 기능은 일반 유저들도 할 수 있습니다. 
# 2. 사용된 라이브러리
데이터베이스 프로그램은 mysql을 사용했습니다. 파이썬 라이브러리로는 mysql과의 연동을 위한 pymysql, 데이터 시각화를 위한 pandas를 사용했습니다. 
# 3. 과정
## 3 - 1. 설계 시작
처음에는 DB설계와 DB프로그래밍 연습을 위한 프로그램으로 간단하게 게시물 보기, 게시물 작성, 게시물 수정만 만들었습니다. 하지만 만들다보니 재미가 들려서 다시 처음부터 만들었습니다. 두번째 설계에서는 관리자 시스템, 댓글 작성 및 수정, 게시물/댓글 삭제 기능을 추가하여 설계를 시작했습니다.
## 3 - 2. DB 설계 
1. 유저 관리 테이블 
- 유저번호를 기본키로 하고 유저번호를 제외한 다른 속성들은 완전함수종속이 되도록 만들었습니다
2. 게시물 관리 테이블
- 게시물 관리 테이블은 게시물 정보 중복을 피하기 위해 게시물 번호(기본키)를 만들었고 게시물 보기 기능을 위해 유저번호를 외래키로 가져와야 합니다. 그래서 처음에는 유저번호와 작성자 컬럼을 넣었으나 회원번호의 중복이 작성자 정보의 중복으로 이어질 수 있기 때문에 기본키 이외의 컬럼에 종속된 컬럼을 분리하는 제3정규화를 거쳐서 작성자 정보를 게시물 관리 테이블에서 작성자 컬럼을 삭제했습니다.
3. 게시판 종류 테이블
- 게시판 종류에는 기본적으로 공지사항, 자유게시판, 질문과 응답이 있으며 이후 더 추가할 수 있도록, 정보 중복이 되지 않도록 따로 테이블을 하나 만들었습니다. 게시판 종류 테이블에는 게시판번호와 게시판이름이 있으며 게시판번호를 기본키로 하여 다른 테이블에서 외래키로 가져오는 방법을 사용했습니다.
4. 댓글 관리 테이블
- 두번째 설계에서 추가하게 된 댓글 기능 또한 테이블을 하나 만들어 관리하도록 했습니다. 댓글 관리 테이블에는 댓글번호를 기본키로 가지고, 유저번호와 게시물번호를 외래키로 가져오도록 구성했습니다.
5. 관리자 구분 테이블
- 관리자 구분을 위해 관리자 구분 테이블을 만들었습니다. 관리자 번호로 기본키를 가지고 관리자번호에 맞는 관리자인지 유저인지 구분할 수 있는 컬럼도 하나 만들었습니다. 사실 유저 관리 테이블에 관리자 구분 컬럼을 넣어도 되지만, 애초에 이 프로그램의 목적은 SQL연습이었기 때문에 Join문 연습을 위해 테이블을 만들었습니다<img width="1083" alt="게시판DB설계" src="https://user-images.githubusercontent.com/104071350/192696543-f63848d6-24f5-4f8e-8d6f-ac911ddea781.png">
## 3 - 3. 테이블 관계
1. 유저 관리 테이블
- 유저 : 게시물 = 1 : M
- 유저 : 댓글 = 1 : M
- 유저 : 관리자 구분 = 1 : 1
2. 게시물 관리 테이블
- 게시물 : 유저 = M : 1
- 게시물 : 댓글 = 1 : M
- 게시물 : 게시판 = M : 1
3. 게시판 종류 테이블
- 게시판 : 게시물 = M : 1
4. 댓글 관리 테이블
- 댓글 : 유저 = M : 1
- 댓글 : 게시물 = M : 1
5. 관리자 구분 테이블
- 관리자 구분 : 유저 = 1 : 1
## 3 - 4. DB 프로그래밍 시작
설계를 어느정도 완성한 후 게시판 DB프로그래밍을 시작했습니다. DB설계때부터 알고리즘은 다 생각해놨고 쿼리만 넣어서 짜면 됐기 때문에 다른 프로그램보단 비교적 난이도가 쉬웠습니다. 처음에 로그인을 하고 해당 아이디로 다른 기능들을 쓸 수 있도록 하기 위해서 바로 로그인 기능을 만들었습니다. 이전에 만든 전체적인 틀이 있었기 때문에 바로 작업에 들어가도 수정만 하면 되었습니다. 로그인을 선택하여 로그인아이디 및 패스워드를 입력받아서 select문으로 DB에 로그인정보가 있는지 확인한 뒤 로그인시킵니다.

1. 로그인 기능
- 첫 화면에서 로그인과 회원가입을 선택합니다. 회원가입을 선택한 경우, 자신의 개인정보를 적고 난 후 로그인아이디와 비밀번호를 입력하면 로그인정보가 완료되었다는 표시가 뜬 후 메뉴로 돌아갑니다. 로그인을 선택했을 경우, 아이디와 패스워드를 입력한 후 메뉴화면으로 들어갑니다. 만약 DB에 없는 아이디와 비밀번호라면 다시 로그인을 하도록 첫 화면으로 돌아갑니다.

로그인 기능을 완성한 후에는 바로 게시판 보기 기능 만들기로 들어갔습니다. 이전에 만들었던 코드는 한 파일에 다 넣어서 만들었기 때문에 전체적인 틀만 남겨놓고 세부 기능들은 다 지웠습니다. 세부 기능들은 모두 다 다른 파일에서 작성하여 메뉴 파일에 임포트 하는 형식으로 만들었습니다. 게시판 보기 기능은 select문과 join문으로 내용을 넘겨받고, order by문으로 날짜순으로 정렬하도록 만들었습니다. 게시판 보기 기능에서는 게시물 리스트를 보여줄 때에는 판다스를 사용하여 데이터프레임으로 표시하지만 상세보기를 할 때에는 댓글을 밑에 표시해야 했기 때문에 제목 글자수에 맞춰 표를 그리도록 만들었습니다. 

2. 게시판 보기 및 댓글 작성 기능
- 게시판 보기를 들어가면 특정 게시판을 선택하거나 게시물 전체 보기를 선택할 수 있습니다. 만약 특정 게시판을 선택했다면 그 게시판에 있는 모든 게시물을 날짜순서대로 보여줍니다., 게시물 한개를 선택했다면 상세보기를 할 수 있도록 만들었습니다. 보통 게시물을 들어가고 난 후에 댓글을 달 수 있기 때문에 상세보기를 들어가고 나서 댓글을 작성할 것인지 물어봅니다. YES를 선택했다면 로그인 기능에서 받았던 유저번호를 넘겨받아 댓글을 작성할 수 있도록 만들었습니다. 만약 댓글 작성을 하고 다시 상세보기로 그 게시물을 들어간다면 게시물의 내용과 함께 그 밑에 댓글창이 뜹니다. 게시판 보기를 들어갔는데 게시물이 하나도 없을 경우, 게시물이 없다는 문구가 출력된 후 메뉴로 돌아갑니다.

게시판 보기 기능을 완성한 후 게시물은 볼 수 있는데 게시물이 없다면 허전하기 때문에 게시물 작성 기능을 만들기 시작했습니다. 게시물 작성 기능은 게시물 내용을 insert문으로 DB에 넣기만 하면 됐기 때문에 다른 기능들보다 비교적 쉬웠습니다. 

3. 게시물 작성 기능
- 게시물 작성을 선택하면 제목, 내용을 입력받고 로그인 기능에서 유저번호를 넘겨받아 게시물 내용들을 DB에 작성합니다. 그 후에 게시판 보기로 해당 게시물을 들어가면 유저가 작성한 내용이 출력됩니다.

게시물을 잘못 작성했는데 수정을 하지 못한다면 다시 삭제했다가 다시 작성해야하기 때문에 너무 귀찮을 것 입니다. 그렇기에 바로 수정 기능 작업에 들어갔습니다. 수정은 update문을 이용해 게시물의 내용을 수정했습니다. 

4. 게시물/댓글 수정 기능
- 게시물/댓글 수정을 선택하면 제목, 내용, 댓글 중 하나를 선택해 수정할 수 있습니다. 수정할 대상을 입력받고 유저번호를 넘겨받아 select문을 이용해 해당 유저가 관리자이거나 수정할 게시물/댓글의 작성자인지 확인한 뒤 만약 작성자이거나 관리자라면 수정내용을 입력받고 업데이트합니다. 만약에 작성자가 아니거나 관리자 아이디가 아니라면 메뉴화면으로 돌아갑니다.

마지막 기능인 게시물/댓글 삭제 기능입니다. 삭제기능 또한 게시물 수정 기능과 똑같이 관리자거나 작성자가 아니라면 삭제할 수 없도록 코드를 짰습니다. 그 외엔 delete문과 join문, where문을 이용해 대상을 삭제하도록 만들었습니다.

5. 게시물/댓글 삭제 기능
- 게시물/댓글 삭제 기능을 선택하면 게시물 삭제와 댓글 삭제 중 하나를 선택합니다. 게시물 삭제를 선택했을 경우 해당 유저가 작성한 게시물 리스트를 보여준 후, 유저가 선택한 게시물을 삭제합니다. 댓글 삭제를 선택했을 경우 해당 유저가 작성한 댓글의 게시물 제목과 댓글 내용 리스트를 보여준 후 유저가 선택한 댓글을 삭제합니다. 만약 잘못 입력하여 다른 작성자가 쓴 게시물/댓글을 삭제한다고 입력받았을 경우 작성자 또는 관리자가 아니라고 출력된 후 메뉴로 돌아갑니다.

# 중요 함수


# 후기
하지만 제대로 설계해서 프로그램을 다시 만드니 프로그램 기능이 다양해서 보기 좋고 성취감도 높았습니다. 앞으로는 이 프로그램을 기반으로 한 게시판 사이트를 만들어 볼 것입니다. 그러기 위해선 프론트엔드인 html, css등을 더 배워야하므로 오래 걸릴 듯 합니다.
